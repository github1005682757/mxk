<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
	<body>
		<script src="../../../js/base.js"></script>
		<script src="../../js/jquery-1.11.2.min.js" type="text/javascript"></script>
		<script type="text/javascript">
			$(document).ready(function(){
				var _Class = function(parent){
					var klass = function(){
						this.init.apply(this, arguments);
					};
					klass.prototype.init = function(){};
					klass.fn = klass.prototype;
					klass.fn.parent = klass;
					klass._super = klass.__proto__;
					//给类添加属性
					klass.extend = function(obj){
						var extended = obj.extended;
						for(var i in obj){
							klass[i] = obj[i];
						}
						if(extended)
							extended(klass);
					};
					//给实例添加属性
					klass.include = function(obj){
						var included = obj.included;
						for(var i in obj){
							klass.fn[i] = obj[i];
						}
						if(included)
							included(klass);
					};
					//添加一个proxy函数
					klass.proxy = function(func){
						var self = this;
						return (function(){
							return func.apply(self, arguments);
						})();
					};
					//在实例中也添加这个函数
					klass.fn.proxy = klass.proxy;
					return klass;
				};
				
				var Button = new _Class();
				Button.include({
					init: function(element){
						this.element = jQuery(element);
						//代理了这个click函数
						//this.element.click(this.proxy(this.click));
						this.element.click(this.click.bind(this)(this));
					},
					elementName: "Button",
					click:function(obj){
						debugger;
					}
				});
				var button = new Button();
				//button.click();
			});
		</script>
	</body>
</html>
